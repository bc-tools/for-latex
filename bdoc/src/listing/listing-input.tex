\documentclass[10pt, a4paper]{article}

\input{../preamble.cfg.tex}

\usepackage[lang = french]{../main/main}
\usepackage{../macroenv/macroenv}
\usepackage{../inenglish/inenglish}
\usepackage{../showcase/showcase}
\usepackage{../focus/focus}

% TESTING LOCAL IMPLEMENTATION %

\usepackage{listing}


% == FORDOC == %

% Source.
%    * https://tex.stackexchange.com/a/604698/6880

\NewDocumentCommand{ \bdocdocextraruler }{ m }{%
    \par
    {
        \centering
        \color{green!50!black}%
        \leavevmode
        \kern.075\linewidth
        \leaders\hrule height3.25pt\hfill\kern0pt
        \footnotesize\itshape\bfseries\space\ignorespaces#1\unskip\space
        \leaders\hrule height3.25pt\hfill\kern0pt
        \kern.075\linewidth
        \par
    }
}

\NewDocumentEnvironment{ bdoc-doc-showcase }
                       { O{ Début du rendu dans cette doc. }
                         O{ Fin du rendu dans cette doc. } }{
%    \begin{colorstrip}{green!5}
        \bdocdocextraruler{#1}
        \smallskip
}{
        \smallskip
        \bdocdocextraruler{#2}
%    \end{colorstrip}
}


\begin{document}

%\section{Cas d'utilisation en \LaTeX}

\subsection{Codes importés}

Pour les codes suivants, on considère un fichier \verb+xyz.tex+ avec le contenu suivant, et ayant le chemin relatif \verb+examples-listing-xyz.tex+ vis à vis de ce document.

\bdoclatexinput[code]{examples/listing/xyz.tex}

\medskip

La macro \bdocmacro{bdoclatexinput} , présentée ci-après, s'utilise comme l'environnement \bdocenv{bdoclatex} excepté que l'on fournit le chemin d'un fichier.


% ------------------ %


\begin{bdocexa}[Face à face]
    \leavevmode

    \begin{bdoclatex}[code]
\bdoclatexinput[sbs]{examples/listing/xyz.tex}
    \end{bdoclatex}

    Ceci produit la mise en forme suivante.

    \bdoclatexinput[sbs]{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[À la suite]
    \leavevmode

    \begin{bdoclatex}[code]
\bdoclatexinput{examples/listing/xyz.tex}
    \end{bdoclatex}

    Ceci produit la mise en forme suivante où l'option employée par défaut est \bdocinlatex#std#.

    \bdoclatexinput{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[Juste le code]
    \leavevmode

    \begin{bdoclatex}[code]
\bdoclatexinput[code]{xyz.tex}
    \end{bdoclatex}

    Ceci produit la mise en forme suivante.

    \bdoclatexinput[code]{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


\subsection{Codes importés et mis en situation} \label{bdoc-latexshow}

\begin{bdocexa}[Showcase]
    Ce qui suit s'obtient via \bdocinlatex+\bdoclatexshow{examples/listing/xyz.tex}+.

    \medskip

    \begin{bdoc-doc-showcase}
        \bdoclatexshow{examples/listing/xyz.tex}
    \end{bdoc-doc-showcase}
\end{bdocexa}


\begin{bdocnote}
    Les textes par défaut tiennent compte de la langue choisie lors du chargement du package \bdocpack{bdoc}.
\end{bdocnote}


% ------------------ %


\begin{bdocexa}[Changer le texte explicatif]
    Via la clé \bdocinlatex|explain|, on peut utiliser un texte personnalisé. Ainsi, \bdocinlatex|\bdoclatexshow[explain = Voici le rendu réel.]{examples/listing/xyz.tex}| produira ce qui suit.

    \medskip

    \begin{bdoc-doc-showcase}
        \bdoclatexshow[explain = Voici le rendu réel.]{examples/listing/xyz.tex}
    \end{bdoc-doc-showcase}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[Les options disponibles]
    En plus du texte explicatif, il est aussi possible d'utiliser toutes les options de \bdocenv{bdocshowcase}, voir \ref{bdoc-showcase}.
    Voici un exemple illustrant ceci.

    \medskip

    \bdoclatexinput[code]{examples/listing/latexshow-options.tex}

    \medskip

    Ceci va produire ce qui suit.

    \medskip

    \begin{bdoc-doc-showcase}
        \input{examples/listing/latexshow-options.tex}
    \end{bdoc-doc-showcase}
\end{bdocexa}

\end{document}
