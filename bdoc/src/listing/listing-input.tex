\input{../doc-header.tex}

\usepackage[lang = french]{../main/main}
\usepackage{../macroenv/macroenv}
\usepackage{../inenglish/inenglish}
\usepackage{../showcase/showcase}
\usepackage{../focus/focus}

% TESTING LOCAL IMPLEMENTATION %

\usepackage{listing}


% WARNING!
%
% We don't need to include the lines below because this is done before
% by the file ``listing-direct.tex``.

\newtcblisting{bdoc-doc-latex-alone}{%
    minted language = latex,
    breakable,
% Code and output
    colback = yellow!5,
% Frame
    colframe = darkgray,
    shadow   = {.75mm}{-.75mm}{0mm}{black!30},
%        sharp corners, % OLD STYLE !
    arc    = .75mm,
    left   = 1mm, right = 1mm,
    bottom = 1mm, top   = 1mm,
% Separating line
    enhanced,
    segmentation style = {
        gray,
        dash pattern = {on 5pt off 2.5pt},
        line width   = 1.25pt
    },
    listing only
}


% == NEEDED == %

% Source.
%    * https://tex.stackexchange.com/a/604698/6880

\NewDocumentCommand{ \bdocdocextraruler }{ m }{%
    \par
    {
        \centering
        \color{green!50!black}%
        \leavevmode
        \kern.075\linewidth
        \leaders\hrule height3.25pt\hfill\kern0pt
        \footnotesize\itshape\bfseries\space\ignorespaces#1\unskip\space
        \leaders\hrule height3.25pt\hfill\kern0pt
        \kern.075\linewidth
        \par
    }
}

\NewDocumentEnvironment{ bdoc-doc-showcase }
                       { O{ Début du rendu dans cette doc. }
                         O{ Fin du rendu dans cette doc. } }{
    \begin{colorstrip}{green!5}
        \bdocdocextraruler{#1}
        \smallskip
}{
        \smallskip
        \bdocdocextraruler{#2}
    \end{colorstrip}
}


\begin{document}

%\section{Cas d'utilisation en \LaTeX}

\subsection{Codes importés}

Pour les codes suivants, on considère un fichier \verb+examples/listing/xyz.tex+ dont le chemin est donné relativement au document présent.
Le contenu de ce fichier se réduit à l'unique ligne \bdocinlatex|$x y z = 1$| .

\medskip

Noter ci-après que la macro \bdocmacro{bdoclatexinput} s'utilise de façon semblable à l'environnement \bdocenv{bdoclatex} excepté que l'on fournit le chemin d'un fichier.


% ------------------ %


\begin{bdocexa}[Face à face]
	\leavevmode

	\begin{bdoc-doc-latex-alone}
\bdoclatexinput[sbs]{examples/listing/xyz.tex}
	\end{bdoc-doc-latex-alone}

	Ceci produit la mise en forme suivante.

	\bdoclatexinput[sbs]{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[À la suite]
	\leavevmode

	\begin{bdoc-doc-latex-alone}
\bdoclatexinput{examples/listing/xyz.tex}
	\end{bdoc-doc-latex-alone}

	Ceci produit la mise en forme suivante où l'option employée par défaut est \bdocinlatex#std#.

	\bdoclatexinput{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[Juste le code]
	\leavevmode

	\begin{bdoc-doc-latex-alone}
\bdoclatexinput[code]{examples/listing/xyz.tex}
	\end{bdoc-doc-latex-alone}

	Ceci produit la mise en forme suivante.

	\bdoclatexinput[code]{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


\subsection{Codes importés et mis en situation} \label{bdoc-latexshow}

\begin{bdocexa}[Showcase]
	Ce qui suit a été obtenu via la macro \bdocmacro{bdoclatexshow} en tapant \bdocinlatex+\bdoclatexshow{examples/listing/xyz.tex}+. 

	\medskip

	\begin{bdoc-doc-showcase}
    	\bdoclatexshow{examples/listing/xyz.tex}
	\end{bdoc-doc-showcase}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[Changer le texte explicatif]
	Pour obtenir ce qui suit avec un texte personnalisé, il suffit d'employer \bdocinlatex|\bdoclatexshow[explain = Voici le rendu réel.]{...}|.

	\medskip

	\begin{bdoc-doc-showcase}[Début du rendu \bdocquote{personnalisé} dans cette doc.]%
	    	                 [Fin du rendu \bdocquote{personnalisé} dans cette doc.]
    	\bdoclatexshow[explain = Voici le rendu réel.]{examples/listing/xyz.tex}
	\end{bdoc-doc-showcase}
\end{bdocexa}


% ------------------ %


\begin{bdocinfo}
    Le texte imprimé par défaut tient compte de la langue choisie lors du chargement du package \bdocpack{bdoc}.
\end{bdocinfo}


% ------------------ %


\begin{bdocexa}[Les options disponibles]
	En plus du texte explicatif, il est aussi possible d'utiliser toutes les options de \bdocenv{bdocshowcase}, voir \ref{bdoc-showcase}.
	Voici un exemple illustrant ceci.

	\medskip
	
	\bdoclatexinput[code]{examples/listing/latexshow-options.tex}
	
	\medskip
	
	Ceci va produire ce qui suit.
	
	\medskip

	\begin{bdoc-doc-showcase}[Début du rendu \bdocquote{personnalisé} dans cette doc.]%
	    	                 [Fin du rendu \bdocquote{personnalisé} dans cette doc.]
    	\input{examples/listing/latexshow-options.tex}
	\end{bdoc-doc-showcase}
\end{bdocexa}

\end{document}
