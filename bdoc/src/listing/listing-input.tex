\input{../doc-header.txt}

\usepackage[lang = french]{../main/main}
\usepackage{../macroenv/macroenv}
\usepackage{../inenglish/inenglish}
\usepackage{../showcase/showcase}
\usepackage{../rem-exa/rem-exa}

\usepackage{listing}


% == NEEDED == %

% Source.
%    * https://tex.stackexchange.com/a/604698/6880

\NewDocumentCommand{ \bdocextraruler }{ m }{%
    \par
    {
        \centering
        \color{green!50!black}%
        \leavevmode
        \kern.075\linewidth
        \leaders\hrule height3.25pt\hfill\kern0pt
        \footnotesize\itshape\bfseries\space\ignorespaces#1\unskip\space
        \leaders\hrule height3.25pt\hfill\kern0pt
        \kern.075\linewidth
        \par
    }
}

\NewDocumentEnvironment{ bdoc-extra-showcase }
                       { O{ Début du rendu dans cette doc. }
                         O{ Fin du rendu dans cette doc. } }{
    \begin{colorstrip}{green!5}
        \bdocextraruler{#1}
        \smallskip
}{
        \smallskip
        \bdocextraruler{#2}
    \end{colorstrip}
}


\begin{document}

%\section{Cas d'utilisation en \LaTeX}

\subsection{Codes importés}

Pour les codes suivants, on considère un fichier \verb+examples/listing/xyz.tex+ dont le chemin est donné relativement au document présent.
Le contenu de ce fichier est l'unique ligne \bdocinlatex|$x y z = 1$| .

\medskip

Notez que les 1\ieres{} macros sont nommées de façon similaire aux environnements précédents en ajoutant le préfixe \bdocpre{input} tout en ignorant les tirets.


\begin{bdocrem}
    Il faut savoir que les macros imprimant automatiquement du texte tiennent compte de la langue choisie lors du chargement du package \bdocpack{bdoc}.
\end{bdocrem}


% ------------------ %


\begin{bdocexa}[Face à face]
	\leavevmode

	\begin{bdoclatex-alone}
\inputbdoclatex{examples/listing/xyz.tex}
	\end{bdoclatex-alone}

	Ceci produit la mise en forme suivante.

	\inputbdoclatex{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[À la suite]
	\bdocmacro{inputbdoclatexflat} produit un code à plat comme ci-dessous.

	\inputbdoclatexflat{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[Juste le code]
	\bdocmacro{inputbdoclatexalone} sert à n'avoir que le code comme ci-après.

	\inputbdoclatexalone{examples/listing/xyz.tex}
\end{bdocexa}


% ------------------ %


%\newpage

\begin{bdocexa}[Code suivi du rendu centré]
	Le rendu suivant est obtenu en utilisant \bdocmacro{inputbdoclatexbefore}.

	\medskip

	\begin{bdocshowcase}
    	\inputbdoclatexbefore{examples/listing/xyz.tex}
	\end{bdocshowcase}

	\bigskip

	Il est possible de changer le texte entre le code et son rendu via un argument optionnel.
	Ainsi \bdocinlatex|\inputbdoclatexbefore[Voici ce que cela donne.]{...}| aboutit au résultat suivant.

	\medskip

	\begin{bdocshowcase}[Début du rendu réel \bdocquote{personnalisé}]%
    	               [Fin du rendu réel \bdocquote{personnalisé}]
    	\inputbdoclatexbefore[Voici ce que cela donne.]{examples/listing/xyz.tex}
	\end{bdocshowcase}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[Rendu centré suivi du code] \label{output-centered}
 	Le rendu suivant
	\footnote{
    	Il faut savoir que le 1\ier{} espace vertical disgracieux vient de l'emploi de \bdocenv{center} en coulisse.
	},
	similaire au précédent, est obtenu en appellant
	\bdocmacro{inputbdoclatexafter} au lieu de \bdocmacro{inputbdoclatexbefore}.

	\medskip

	\begin{bdocshowcase}
    	\inputbdoclatexafter{examples/listing/xyz.tex}
	\end{bdocshowcase}

	\bigskip

	Via \bdocinlatex|\inputbdoclatexafter[Cette formule se tape comme suit.]{...}| , on obtient le résultat ci-après.

	\medskip

	\begin{bdocshowcase}[Début du rendu réel \bdocquote{personnalisé}]%
        	            [Fin du rendu réel \bdocquote{personnalisé}]
    	\inputbdoclatexafter[Cette formule se tape comme suit.]{examples/listing/xyz.tex}
	\end{bdocshowcase}
\end{bdocexa}


% ------------------ %


\begin{bdocexa}[Code importé et son rendu réel]
	Pour un code et son rendu réel non centré, on utilisera \bdocmacro{inputbdoclatexreal} qui va produire ce qui suit

	\medskip

	\begin{bdoc-extra-showcase}
    	\inputbdoclatexreal{examples/listing/xyz.tex}
	\end{bdoc-extra-showcase}

	\bigskip

	Là aussi le texte par défaut peut être \bdocquote{personnalisé}. Par exemple, ce qui suit a été obtenu via \bdocinlatex|\inputbdoclatexreal[On obtient le rendu réel ci-après.]{...}| .

	\medskip

	\begin{bdoc-extra-showcase}[Début du rendu \bdocquote{personnalisé} dans cette doc.]%
    	                       [Fin du rendu \bdocquote{personnalisé} dans cette doc.]
    	\inputbdoclatexreal[On obtient le rendu réel ci-après.]{examples/listing/xyz.tex}
	\end{bdoc-extra-showcase}
\end{bdocexa}

\end{document}
