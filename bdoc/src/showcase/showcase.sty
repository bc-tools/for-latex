% == PACKAGES == %

\RequirePackage{clrstrip}[2021-08-28]


% == TOOLS == %

% -- LATEX SHOWCASE -- %

\ExplSyntaxOn

%%%
% prototype::
%     #1 : a text
%     #2 : a color
%
%     :action: this macro adds two horizontal lines on either side of the text.
%              The final output is centered.
%
% note::
%     The code used comes from
%     cf::``this post ;
%           https://tex.stackexchange.com/a/604708/6880``.
%%%
\NewDocumentCommand{\bdocruler}{m m}{
  \par
  {
    \centering
      \scriptsize
      \itshape
      \bfseries
      \color{#2}

      \hbox_set:Nn \l_tmpa_box { \,\, #1 \,\, }
      \dim_set:Nn  \l_tmpa_dim {
        .35 \linewidth - .5 \box_wd:N \l_tmpa_box
      }

      \rule[.75pt] { \dim_use:N \l_tmpa_dim }
                   { 2.5pt }
      \box_use:N   \l_tmpa_box
      \rule[.75pt] { \dim_use:N \l_tmpa_dim }
                   { 2.5pt }
      \par
  }
}

\ExplSyntaxOff


%%%
% prototype::
%     #1 : the text before the real output
%     #2 : the text after the real output
%     #3 : the color of the colored stripe and also the decorated texts
%          printed corresponding to the two first arguments.
%
%     :action: this environment adds a page-width colored stripe in the
%              background of the environment content processed by \latex.
%              This stripe is preceded and followed by centered materials
%              produced by the macro ``\bdocruler`` such as to stress the
%              start and the end of the content.
%%%
\NewDocumentEnvironment{bdocshowcase}{
  O{\bdoc@trans@latex@show@start}
  O{\bdoc@trans@latex@show@end}
  D<>{cyan}
}{
  \begin{colorstrip}{#3!5}
    \begin{bdocshowcase*}[#1][#2]<#3!50!black>
}{
    \end{bdocshowcase*}
  \end{colorstrip}
}


%%%
% prototype::
%     #1 : the text before the real output
%     #2 : the text after the real output
%     #3 : the color of the decorated texts printed corresponding to
%          the two first arguments.
%
%     :action: this environment just adds its content processed by \latex
%              between centered materials produced by the macro ``\bdocruler``
%              such as to stress the start and the end of the content.
%%%
\NewDocumentEnvironment{bdocshowcase*}{
  O{\bdoc@trans@latex@show@start}
  O{\bdoc@trans@latex@show@end}
  D<>{gray!70!black}
}{
  \bdocruler{#1}{#3}
  \medskip
}{
  \medskip
  \bdocruler{#2}{#3}
}
