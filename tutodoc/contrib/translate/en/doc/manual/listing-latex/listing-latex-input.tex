\documentclass{tutodoc}

\input{../preamble.cfg.tex}


% == FORDOC == %

% Source.
%    * https://tex.stackexchange.com/a/604698/6880

\NewDocumentCommand{ \tdocextrarulerDOC }{ m }{%
    \par
    {
        \centering
        \color{green!50!black}%
        \leavevmode
        \kern.075\linewidth
        \leaders\hrule height3.25pt\hfill\kern0pt
        \footnotesize\itshape\bfseries\space\ignorespaces#1\unskip\space
        \leaders\hrule height3.25pt\hfill\kern0pt
        \kern.075\linewidth
        \par
    }
}

\NewDocumentEnvironment{ tdocshowcaseDOC }
                       { O{ Start of the rendering in this doc. }
                         O{ End of rendering in this doc. } }{
        \tdocextrarulerDOC{#1}
        \nopagebreak\smallskip\nopagebreak
}{
        \nopagebreak\smallskip\nopagebreak
        \tdocextrarulerDOC{#2}
}


\begin{document}

\subsection{Imported codes}

For the following codes, consider a file with the relative path \verb+examples-listing-xyz.tex+, and with the following contents.

\tdoclatexinput[\tdoctcb{code}]{examples/listing-latex/xyz.tex}

\medskip

The \tdocmacro{tdoclatexinput} macro, shown below, expects the path of a file and offers the same options as the \tdocenv*{tdoclatex} environment.


% ------------------ %


\begin{tdocexa}[Side by side]
    \leavevmode

    \begin{tdoclatex}[\tdoctcb{code}]
\tdoclatexinput[\tdoctcb{sbs}]{examples/listing-latex/xyz.tex}
    \end{tdoclatex}

    This produces the following layout.

    \tdoclatexinput[\tdoctcb{sbs}]{examples/listing-latex/xyz.tex}
\end{tdocexa}


% ------------------ %


\begin{tdocexa}[Following]
    \leavevmode

    \begin{tdoclatex}[\tdoctcb{code}]
\tdoclatexinput{examples/listing-latex/xyz.tex}
    \end{tdoclatex}

    This produces the following formatting where the default option is \tdoclatexin#\tdoctcb{std}#.

    \tdoclatexinput{examples/listing-latex/xyz.tex}
\end{tdocexa}


% ------------------ %


\begin{tdocexa}[Just the code]
    \leavevmode

    \begin{tdoclatex}[\tdoctcb{code}]
\tdoclatexinput[\tdoctcb{code}]{examples/listing-latex/xyz.tex}
    \end{tdoclatex}

    This produces the following layout.

    \tdoclatexinput[\tdoctcb{code}]{examples/listing-latex/xyz.tex}
\end{tdocexa}


% ------------------ %


\subsection{Imported codes put into practice}
\label{tutodoc-listing-latexshow}

\begin{tdocexa}[Showcase]
    The following comes from \tdoclatexin+\tdoclatexshow{examples-listing-xyz.tex}+.

    \medskip

    \begin{tdocshowcaseDOC}
        \tdoclatexshow{examples/listing-latex/xyz.tex}
    \end{tdocshowcaseDOC}
\end{tdocexa}


\begin{tdocnote}
    The default texts take into account the language detected by \thisproj.
\end{tdocnote}


% ------------------ %


\begin{tdocexa}[Changing the explanatory text]
    Using the key \tdoclatexin|explain|, you can use custom text. Thus, \tdoclatexin|tdoclatexshow[explain = Here is the rendering.]{examples-listing-xyz.tex}| will give the following.

    \medskip

    \begin{tdocshowcaseDOC}
        \tdoclatexshow[explain = Here is the rendering.]{examples/listing-latex/xyz.tex}
    \end{tdocshowcaseDOC}
\end{tdocexa}


% ------------------ %


\begin{tdocexa}[The options available]
    In addition to the explanatory text, it is also possible to use all the options of \tdocenv*{tdocshowcase} environment, see \ref{tutodoc-showcase} page \pageref{tutodoc-showcase}.
    Here is an example to illustrate this.

    \medskip

    \tdoclatexinput[\tdoctcb{code}]{examples/listing-latex/latexshow-options.tex}

    \medskip

    This will produce the following.

    \medskip

    \begin{tdocshowcaseDOC}
        \input{examples/listing-latex/latexshow-options.tex}
    \end{tdocshowcaseDOC}
\end{tdocexa}

\end{document}
