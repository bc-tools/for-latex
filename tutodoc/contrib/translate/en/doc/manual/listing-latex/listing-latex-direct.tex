\documentclass{tutodoc}

\input{../preamble.cfg.tex}


% == FORDOC == %

% Source.
%    * https://tex.stackexchange.com/a/604698/6880

\NewDocumentCommand{ \tdocbasicinputDOC }{ sm }{%
    \IfBooleanF{#1}{Consider the following code.}

    \tdoclatexinput[\tdoctcb{code}]{#2}

    This will produce the following.

    \input{#2}
}


\begin{document}

\section{Use cases in \LaTeX}
\label{tutodoc-listing-latex}

Documenting a package or class is best done through use cases showing both the code and the corresponding result.
\footnote{
    Code is formatted using the \tdocpack{minted} and \tdocpack{tcolorbox} packages.
}


\subsection{\tdocquote{Inline} codes}
\label{tutodoc-listing-latex-inline}

The \tdocmacro{tdoclatexin} macro
\footnote{
    The name of the macro \tdocmacro{tdoclatexin} comes from \tdocquote{\tdocprewhy{in.line} \LaTeX}.
}
can be used to type inline code in a similar way to \tdocmacro{verb} or like a standard macro (see brace management in the last case below).
Here are some examples.


\begin{tdoclatex}[\tdoctcb{sbs}]
    1: \tdoclatexin|$a^b = c$|               \\
    2: \tdoclatexin+\tdoclatexin|$a^b = c$|+ \\
    3: \tdoclatexin{\tdoclatexin{$a^b = c$}}
\end{tdoclatex}


\begin{tdocnote}
    The \tdocmacro{tdoclatexin} macro can be used in a footnote: see below.
    \footnote{
        \tdoclatexin+$minted = TOP$+ has been typed \tdoclatexin|\tdoclatexin+$minted = TOP$+| in this footnote...
    }
    In addition, a background color is deliberately used to subtly highlight the codes \tdoclatexin#\LaTeX#\,.
\end{tdocnote}


% ------------------ %


\subsection{Directly typed codes}

\begin{tdocexa}[Side by side]
    Displaying a code and its rendering side by side is done as follows where the macro \tdocmacro{tdoctcb} allows you to just type \tdoclatexin{\tdoctcb{sbs}} instead of \tdoclatexin{listing side text} (\tdoclatexin#sbs# is for \tdocquote{\tdocprewhy{s.ide} \tdocprewhy{b.y} \tdocprewhy{s.ide}}\,, while \tdoclatexin#tcb# is the standard abbreviation for \texttt{tcolorbox}).

    \tdocbasicinputDOC*{examples/listing-latex/ABC.tex}
\end{tdocexa}


\begin{tdocnote}
	L'argument optionnel de l'environnement \tdocenv*{tdoclatex} doit être un style pour un \tdocmacro{tcblisting}. Par exemple, on peut faire les modifications suivantes si besoin.%
	\footnote{
		Cette documentation utilise ceci pour obtenir des rendus corrects de codes \LaTeX\ produisant des cadres ombrés : voir la section \ref{tutodoc-admonitions}.
	}

	The optional argument of the \tdocenv*{tdoclatex} environment must be a style for a \tdocmacro{tcblisting}. For example, the following modifications can be made if required.
	\footnote{
		This documentation uses this to obtain correct renderings of \LaTeX\ codes producing shaded frames: see the \ref{tutodoc-admonitions} section.
	}

    \tdocbasicinputDOC*{examples/listing-latex/ABC-custom.tex}
\end{tdocnote}


% ------------------ %


\begin{tdocexa}[Following]
    \tdocenv{tdoclatex} produces the following result via the default option corresponding to \tdoclatexin#\tdoctcb{std}#\,.
    \footnote{
        \tdoclatexin{std} refers to the \tdocquote{standard} behaviour of \tdocpack{tcolorbox} in relation to the \tdocpack{minted} library.
    }

    \begin{tdoclatex}
        $A = B + C$
    \end{tdoclatex}
\end{tdocexa}


% ------------------ %


\begin{tdocexa}[Just the code]
    Via the option \tdoclatexin#\tdoctcb{code}#, we'll just get the code as shown below.

    \begin{tdoclatex}[\tdoctcb{code}]
        $A = B + C$
    \end{tdoclatex}
\end{tdocexa}


% ------------------ %


\begin{tdocwarn}
    With default formatting, if the code begins with an opening bracket, the default option must be explicitly indicated.
    \tdocbasicinputDOC{examples/listing-latex/strange.tex}

    \smallskip

    Another method is to use the \tdocmacro{string} primitive.
    \tdocbasicinputDOC{examples/listing-latex/strange-bis.tex}
\end{tdocwarn}

\end{document}
