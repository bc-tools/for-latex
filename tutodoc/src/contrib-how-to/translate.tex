\documentclass[10pt, a4paper]{../main/main}

\input{../preamble.cfg.tex}

\usepackage{../highlight/highlight.cls}
\usepackage{../inenglish/inenglish.cls}
\usepackage{../macroenv/macroenv.cls}

%\geometry{showframe}


% == FORDOC == %

\NewDocumentCommand{\mailsubject}{m}%  <-- Translate me!
  {sujet \tdocquote{\texttt{tutodoc - CONTRIB - #1}}}

% Source: https://tex.stackexchange.com/a/424061/6880

\newcommand{\FTdirO}{}
\def\FTdirO(#1,#2,#3){%
  \FTfile(#1,{\color{blue!40!black}\faFolderOpen\hspace{-.35pt}}{\hspace{0.2em}#3})
  (tmp.west)++(0.8em,-0.4em)node(#2){}
  (tmp.west)++(1.5em,0)
  ++(0,-1.3em)
}

\newcommand{\FTdirC}{}
\def\FTdirC(#1,#2,#3){%
  \FTfile(#1,{\color{blue!40!black}\faFolder\hspace{.75pt}}{\hspace{0.2em}#3})
  (tmp.west)++(0.8em,-0.4em)node(#2){}
  (tmp.west)++(1.5em,0)
  ++(0,-1.3em)
}

\newcommand{\FTfile}{}
\def\FTfile(#1,#2){%
  node(tmp){}
  (#1|-tmp)++(0.6em,0)
  node(tmp)[anchor=west,black]{\tt #2}
  (#1)|-(tmp.west)
  ++(0,-1.2em)
}

\newcommand{\FTroot}{}
\def\FTroot{tmp.west}

\newcommand\contribtranslatedirtree{
  \begin{tikzpicture}%
    \draw[color=black, thick]
% en        : parent = \FTroot
% normal dir: (parentID, currentID, label)
% file      :       (parentID, label)
      \FTdirO(\FTroot,root,translate){
        \FTdirC(root,changes,changes){
        }
        \FTdirO(root,en,en) {
          \FTdirC(en,api,api) {
          }
          \FTdirC(en,doc,doc) {
          }
        }
        \FTdirC(root,fr,fr){
        }
        \FTdirC(root,status,status){
          \FTdirO(status,en,en) {
            \FTfile(en,api.yaml)
            \FTfile(en,manual.yaml)
          }
          \FTdirC(status,fr,fr){
          }
        }
        \FTfile(root,README.md)
        \FTfile(root,LICENSE.txt)
      };
  \end{tikzpicture}
}


\begin{document}

%\section{Contribuer}

\subsection{Compléter les traductions}

\begin{tdocnote}
	L'auteur de \thisproj\ gère les versions françaises et anglaises des traductions.
\end{tdocnote}


\begin{tdoccaut}
	Même si nous allons expliquer comment traduire les documentations, il semble peu pertinent de le faire, car l'anglais devrait suffire de nos jours.%
	\footnote{
		L'existence d'une version française est une simple conséquence de la langue maternelle de l'auteur de \thisproj.
	}
\end{tdoccaut}


\begin{wrapfigure}{R}
	\contribtranslatedirtree\
	\caption{Vue simplifiée du dossier des traductions}
	\label{tdoc-contrib-tranlsate-dir}
\end{wrapfigure}{}


Les traductions sont organisées grosso-modo comme dans la figure \ref{tdoc-contrib-tranlsate-dir} où seuls les dossiers importants pour les traductions ont été \tdocquote{ouverts}\,.%
\footnote{
	Cette organisation était celle du 5 octobre 2024, mais elle reste d'actualité.
}



\subsubsection{Les dossiers \texttt{fr} et \texttt{en}}

Ces deux dossiers, gérés par l'auteur de \thisproj, ont la même organisation ; ils contiennent des fichiers faciles à traduire même si l'on n'est pas un codeur.

\medskip

\textbf{\emph{Si vous souhaitez ajouter le support de l'italien en partant de fichiers rédigés en anglais}}, il faudra agir comme suit.
%
\begin{enumerate}
	\item Obtenir le nom court standardisé de la langue italien.
	Pour ce faire, il suffit de visiter
	\href{https://en.wikipedia.org/wiki/IETF_language_tag#List_of_common_primary_language_subtags}%
	     {la page \tdocquote{IIETF language tag}}
	de \texttt{Wikipédia}.
	Pour notre exemple fictif, nous découvrons le nom court \verb#it#\,.

	\item Obtenir une copie du dossier \verb#translate/en#\,.
	Pour cela, deux méthodes sont possibles.
	%
	\begin{enumerate}
		\item Soit via \thisrepo\,.\,%
		\footnote{
			Si \git\ vous est inconnu, ou vous fait peur, vous pourrez télécharger l'ensemble du code source de \thisproj\ depuis un navigateur, puis ensuite ne garder que le dossier utile.
		}

		\item Soit via une demande par mail.
		Dans ce cas, on utilisera le \mailsubject{en FOR it}\,, ceci afin de préserver la santé mentale de l'auteur de \thisproj.
	\end{enumerate}


	\item Il ne reste plus qu'à copier intégralement le contenu de \verb#translate/en# dans un dossier \verb#it# pour faire les traductions en italien.%
	\footnote{
		Comme indiqué plus haut, il n'y a pas de besoin du côté du dossier \texttt{doc} de la documentation.
	}


	\item Une fois le travail fini, deux options s'offrent à vous.
	%
	\begin{enumerate}
		\item L'idéal est de le communiquer via \thisrepo\ en usant de \git\ via un classique \verb#git push#\,.

		\item En cas d'allergie connue à \git\,, vous pourrez envoyer votre dossier de traductions compressé au format \verb#zip# ou \verb#rar# via un mail de \mailsubject{it}\,.
	\end{enumerate}
\end{enumerate}


\begin{tdocimp}
	Le dossier \verb#api# contient les traductions relatives aux fonctionnalités de \thisproj.
	Vous y trouverez des fichiers de type \verb#TXT# à modifier via un éditeur de texte, ou de code, mais non via un traitement de texte.
	Les contenus de ces fichiers utilisent des lignes commentées en anglais pour expliquer ce que fera \thisproj\ ; ces lignes commencent par \verb#//#\,. Voici un extrait de ce type de fichier.

	\begin{verbatim}
  // #1: year  in format YYYY like 2023.
  // #2: month in format MM   like 04.
  // #3: day   in format DD   like 29.
  date = #1-#2-#3

  // #1: the idea is to produce one text like
  //     "this word means #1 in english".
  in_EN = #1 in english\end{verbatim}
\end{tdocimp}


\begin{tdocnote}
	Le dossier \verb#doc# est réservé aux documentations. Il contient des fichiers de type \verb#TEX# compilables directement pour une validation en temps réel des traductions faites.
\end{tdocnote}


\begin{tdocwarn}
	Ne partir que de l'un des dossiers \verb#fr# et \verb#en#, car ceux-ci sont de la responsabilité de l'auteur de \thisproj.
\end{tdocwarn}


\subsubsection{Le dossier \texttt{changes}}

Ce dossier est un outil de communication où sont indiqués les changements importants sans s'attarder sur les modifications mineures propres à une ou plusieurs traductions.



\subsubsection{Le dossier \texttt{status}}

Ce dossier permet de savoir où en sont les traductions du point de vue du projet. Tout se passe via des fichiers \verb#YAML# bien commentés, et lisibles par un non codeur.



\subsubsection{Les fichiers \texttt{README.md} et \texttt{LICENSE.txt}}

Le fichier \texttt{LICENSE.txt} est bien nommé, tandis que le fichier \texttt{README.md} reprend en anglais ce qui a été dit dans cette section sur les traductions.

\end{document}
