\documentclass{../main/main}

\input{../preamble.cfg.tex}

\usepackage{../admonitions/admonitions.cls}
\usepackage{../inenglish/inenglish.cls}
\usepackage{../macroenv/macroenv.cls}

% TESTING LOCAL IMPLEMENTATION %

\usepackage{listing-latex.cls}


% == FORDOC == %

% Source.
%    * https://tex.stackexchange.com/a/604698/6880

\NewDocumentCommand{ \tdocbasicinputDOC }{ sm }{%
    \IfBooleanF{#1}{Considérons le code suivant.}

    \tdoclatexinput<\tdoctcb{code}>{#2}

    Ceci produira ce qui suit.

    \input{#2}
}


\begin{document}

\section{Cas d'utilisation en \LaTeX}
\label{tutodoc-listing-latex}

Documenter un package ou une classe se fait efficacement via des cas d'utilisation montrant à la fois du code et le résultat correspondant.%
\footnote{
    La mise en forme des codes se fait via les packages \tdocpack{minted} et  \tdocpack{tcolorbox}.
}



\subsection{Codes \tdocquote{en ligne}}
\label{tutodoc-listing-latex-inline}

\begin{tdocexa}[Usage standard]
    La macro \tdocmacro{tdoclatexin}
    \footnote{
        Le nom de la macro \tdocmacro{tdoclatexin} vient de \tdocquote{\tdocprewhy{in.line} \LaTeX} soit \tdocinEN{\LaTeX\ en ligne}.
    }
    permet de taper du code en ligne via un usage similaire à \tdocmacro{verb}, ou bien comme une macro standard (voir la gestion des accolades dans le dernier cas ci-dessous).
    Voici des exemples d'utilisation.%
    \footnote{
    	Une couleur de fond est volontairement utilisée pour subtilement faire ressortir les codes \tdoclatexin{\LaTeX}\,.
    }

    \begin{tdoclatex}<\tdoctcb{sbs}>
1: \tdoclatexin|$a^b = c$|               \\
2: \tdoclatexin+\tdoclatexin|$a^b = c$|+ \\
3: \tdoclatexin{\tdoclatexin{$a^b = c$}}
	\end{tdoclatex}
\end{tdocexa}

\begin{tdocexa}[Des options possibles]
    Comme la macro \tdocmacro{tdoclatexin} s'appuie sur \tdocpack{minted}, on peut utiliser toutes les options prises en compte par \tdocpack{minted}. 
    Voici des exemples d'utilisation.

    \begin{tdoclatex}<\tdoctcb{sbs}>
1: \tdoclatexin{$a^b = c$}             \\
2: \tdoclatexin[style = bw]{$a^b = c$} \\
3: \tdoclatexin[style = igor,
                showspaces]{$a^b = c$}
	\end{tdoclatex}
\end{tdocexa}


\begin{tdocnote}
    La macro \tdocmacro{tdoclatexin} est utilisable dans une note de pied de page : voir ci-dessous.
    \footnote{
        \tdoclatexin+$minted = TOP$+ a été tapé \tdoclatexin|\tdoclatexin+$minted = TOP$+| dans cette note de bas de page..
    }
\end{tdocnote}



\subsection{Codes tapés directement}

\begin{tdocexa}[Face à face]
    Afficher un code et son rendu côte à côte se fait comme suit où la macro \tdocmacro{tdoctcb} permet de juste taper \tdoclatexin{\tdoctcb{sbs}} au lieu de \tdoclatexin{listing side text} (\tdoclatexin#sbs# est pour \tdocquote{\tdocprewhy{s.ide} \tdocprewhy{b.y} \tdocprewhy{s.ide}} soit \tdocinEN{côte à côte}, tandis que \tdoclatexin#tcb# est l'abréviation standard de \texttt{tcolorbox}). Bien noter l'emploi de chevrons, et non de crochets (nous revenons sur ceci un plus bas).

    \tdocbasicinputDOC*{examples/listing-latex/ABC.tex}
\end{tdocexa}


\begin{tdocexa}[À la suite]
    \tdocenv{tdoclatex} produit le résultat suivant (ce réglage par défaut s'obtient aussi via l'emploi de \tdoclatexin#\tdoctcb{std}#).
    \footnote{
        \tdoclatexin{std} fait référence au comportement \tdocquote{standard} de \tdocpack{tcolorbox} vis à vis de la librairie \tdocpack{minted}.
    }

    \begin{tdoclatex}
$A = B + C$
    \end{tdoclatex}
\end{tdocexa}


\begin{tdocexa}[Juste le code]
    Via \tdoclatexin#\tdoctcb{code}#, on aura juste le code comme ci-après.

    \begin{tdoclatex}<\tdoctcb{code}>
$A = B + C$
    \end{tdoclatex}
\end{tdocexa}


\begin{tdocexa}[Personnaliser]
	L'environnement \tdocenv*{tdoclatex} accepte deux types d'argument optionnel.
	%
	\begin{enumerate}
		\item Entre des chevrons, on peut employer toute option prise en compte par les environnements obtenus via \tdocpack{tcolorbox}.

		\item Entre de classiques crochets, on peut employer toute option prise en compte par \tdocpack{minted}.
	\end{enumerate}
	
	Par exemple, on peut faire les modifications suivantes si besoin.%
	\footnote{
		Cette documentation utilise les options entre chevrons pour obtenir des rendus corrects de codes \LaTeX\ produisant des cadres ombrés : voir la section \ref{tutodoc-admonitions} page \pageref{tutodoc-admonitions}.
	}

    \tdocbasicinputDOC*{examples/listing-latex/ABC-custom.tex}
\end{tdocexa}

\medskip

\begin{tdocwarn}
    Pour obtenir la mise en forme par défaut d'un code commençant par un crochet, ou un chevron, ouvrant, il faudra bidouiller un peu comme ci-dessous.
    \tdocbasicinputDOC*{examples/listing-latex/strange.tex}

    \smallskip

    Une autre méthode consiste à utiliser la primitive \tdocmacro{string} comme ci-après.
    \tdocbasicinputDOC*{examples/listing-latex/strange-bis.tex}
\end{tdocwarn}

\end{document}
