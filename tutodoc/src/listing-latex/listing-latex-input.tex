\documentclass{../main/main}

\input{../preamble.cfg.tex}

\usepackage{../admonitions/admonitions.cls}
\usepackage{../inenglish/inenglish.cls}
\usepackage{../macroenv/macroenv.cls}
\usepackage{../showcase/showcase.cls}

% TESTING LOCAL IMPLEMENTATION %

\usepackage{listing-latex.cls}


% == FORDOC == %

% Source.
%    * https://tex.stackexchange.com/a/604698/6880

\NewDocumentCommand{ \tdocextrarulerDOC }{ m }{%
    \par
    {
        \centering
        \color{green!50!black}%
        \leavevmode
        \kern.075\linewidth
        \leaders\hrule height3.25pt\hfill\kern0pt
        \footnotesize\itshape\bfseries\space\ignorespaces#1\unskip\space
        \leaders\hrule height3.25pt\hfill\kern0pt
        \kern.075\linewidth
        \par
    }
}

\NewDocumentEnvironment{ tdocshowcaseDOC }
                       { O{ Début du rendu dans cette doc. }
                         O{ Fin du rendu dans cette doc. } }{
        \tdocextrarulerDOC{#1}
        \nopagebreak\smallskip\nopagebreak
}{
        \nopagebreak\smallskip\nopagebreak
        \tdocextrarulerDOC{#2}
}


\begin{document}

\subsection{Codes importés}

Pour les codes suivants, on considère un fichier de chemin relatif \verb+examples-listing-xyz.tex+, et ayant le contenu suivant.


\tdoclatexinput<\tdoctcb{code}>{examples/listing-latex/xyz.tex}


\medskip


La macro \tdocmacro{tdoclatexinput}, présentée ci-dessous, attend le chemin d'un fichier et propose le même système d'options entre crochets, ou entre chevrons, que l'environnement \tdocenv*{tdoclatex}.


\begin{tdocexa}[Face à face]
    \leavevmode

    \begin{tdoclatex}<\tdoctcb{code}>
\tdoclatexinput<\tdoctcb{sbs}>{examples/listing-latex/xyz.tex}
    \end{tdoclatex}

    Ceci produit la mise en forme suivante.

    \tdoclatexinput<\tdoctcb{sbs}>{examples/listing-latex/xyz.tex}
\end{tdocexa}


\begin{tdocexa}[À la suite]
    \leavevmode

    \begin{tdoclatex}<\tdoctcb{code}>
\tdoclatexinput{examples/listing-latex/xyz.tex}
    \end{tdoclatex}

    Ceci produit la mise en forme suivante qui correspond aussi à l'option \tdoclatexin#\tdoctcb{std}#\,.

    \tdoclatexinput{examples/listing-latex/xyz.tex}
\end{tdocexa}


\begin{tdocexa}[Juste le code]
    \leavevmode

    \begin{tdoclatex}<\tdoctcb{code}>
\tdoclatexinput<\tdoctcb{code}>{examples/listing-latex/xyz.tex}
    \end{tdoclatex}

    Ceci produit la mise en forme suivante.

    \tdoclatexinput<\tdoctcb{code}>{examples/listing-latex/xyz.tex}
\end{tdocexa}


\begin{tdocexa}[Personnaliser]
    \leavevmode

    \begin{tdoclatex}<\tdoctcb{code}>
\tdoclatexinput[style=igor, showspaces]<\tdoctcb{code}>{examples/listing-latex/xyz.tex}
    \end{tdoclatex}

    Ceci produit la mise en forme suivante.

	\tdoclatexinput[style = igor, showspaces]<\tdoctcb{code}>{examples/listing-latex/xyz.tex}
\end{tdocexa}



\subsection{Codes importés et mis en situation}
\label{tutodoc-listing-latexshow}

\begin{tdocexa}[Mise en situation]
    \tdoclatexin+\tdoclatexshow{examples-listing-xyz.tex}+ produit ce qui suit.

    \medskip

    \begin{tdocshowcaseDOC}
        \tdoclatexshow{examples/listing-latex/xyz.tex}
    \end{tdocshowcaseDOC}
\end{tdocexa}


\begin{tdocnote}
    Les textes par défaut tiennent compte de la langue détectée par \thisproj.
\end{tdocnote}


\begin{tdocexa}[Changer le texte explicatif]
    Via la clé \tdoclatexin|explain|, on peut utiliser un texte personnalisé. Ainsi, \tdoclatexin|\tdoclatexshow[explain = Voici le rendu réel.]{examples-listing-xyz.tex}| produira ce qui suit.

    \medskip

    \begin{tdocshowcaseDOC}
        \tdoclatexshow[explain = Voici le rendu réel.]{examples/listing-latex/xyz.tex}
    \end{tdocshowcaseDOC}
\end{tdocexa}


\begin{tdocexa}[Les options disponibles]
    En plus du texte explicatif, il est aussi possible d'utiliser toutes les options de l'environnement \tdocenv*{tdocshowcase}, voir la section \ref{tutodoc-showcase} page \pageref{tutodoc-showcase}.
    Voici un exemple illustrant ceci.

    \medskip

    \tdoclatexinput<\tdoctcb{code}>{examples/listing-latex/latexshow-options.tex}

    \medskip

    Ceci va produire ce qui suit.

    \medskip

    \begin{tdocshowcaseDOC}
        \input{examples/listing-latex/latexshow-options.tex}
    \end{tdocshowcaseDOC}
\end{tdocexa}

\end{document}
